/// \file
/// \date 2013-01-05
/// \author Xavier Michelon
///
/// \brief Implementation of OpenGL Widget


#include "stdafx.h"
#include "GlWidget.h"


//**********************************************************************************************************************
/// \param[in] parent The parent widget
//**********************************************************************************************************************
GlWidget::GlWidget(QWidget* parent)
   : QGLWidget(QGLFormat(QGL::AlphaChannel | QGL::DoubleBuffer | QGL::Rgba), parent)
{
   this->setAutoBufferSwap(false);
}


//**********************************************************************************************************************
// 
//**********************************************************************************************************************
GlWidget::~GlWidget()
{

}


//**********************************************************************************************************************
// 
//**********************************************************************************************************************
void GlWidget::initializeGL()
{
   qDebug("InitializeGL()");
   glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
}


//**********************************************************************************************************************
// 
//**********************************************************************************************************************
void GlWidget::paintGL()
{
   qDebug("paintGL()");
   glLoadIdentity();
   glClear(GL_COLOR_BUFFER_BIT);
   glColor4f(1.0f, 0.5f, 0.0f, 1.0f);
   glBegin(GL_QUADS);
   glVertex2i(0, 0);
   glVertex2i(32, 0);
   glVertex2i(32, 32);
   glVertex2i(0, 32);
   glEnd();
   this->swapBuffers();
}


//**********************************************************************************************************************
// 
//**********************************************************************************************************************
void GlWidget::resizeGL(int width, int height)
{
   qDebug("resizeGL()");
   glViewport(0, 0, width, height);
   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();
   glOrtho(0, width, height, 0, -1.0, 1.0);
   glMatrixMode(GL_MODELVIEW);
}
